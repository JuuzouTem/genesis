{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/Juuzou/Desktop/YKS/genesis/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useState,useEffect,useMemo}from'react';import styled,{css}from'styled-components';import{useCurrentTime}from'../../hooks/useCurrentTime';// Zamanı parse etmek için yardımcı fonksiyon\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const parseTime=timeStr=>{const[start,end]=timeStr.split('-');const[startH,startM]=start.split(':').map(Number);const[endH,endM]=end.split(':').map(Number);const startTime=new Date();startTime.setHours(startH,startM,0,0);const endTime=new Date();endTime.setHours(endH,endM,0,0);return{startTime,endTime};};// ... Stil tanımlamaları (Card, Title vs.) ...\nconst TimerContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  font-size: 0.9rem;\\n  color: \",\";\\n  margin-bottom: 1rem;\\n\"])),_ref=>{let{theme}=_ref;return theme.colors.textSecondary;});// Card stiline yeni durumlar ekleyelim\nconst Card=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  /* ... \\xF6nceki stiller ... */\\n  \",\"\\n\"])),_ref2=>{let{status}=_ref2;if(status==='locked')return css(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"opacity: 0.4; filter: grayscale(80%);\"])));if(status==='missed')return css(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"border-left-color: \",\"; opacity: 0.5;\"])),_ref3=>{let{theme}=_ref3;return theme.colors.accent;});});const ActionButton=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 0.75rem;\\n  background-color: \",\";\\n  color: \",\";\\n  border: none;\\n  border-radius: 5px;\\n  font-family: \",\";\\n  font-size: 1rem;\\n  cursor: pointer;\\n  transition: all 0.2s;\\n\\n  &:hover:not(:disabled) {\\n    background-color: \",\";\\n    box-shadow: 0 0 10px \",\";\\n  }\\n  \\n  &:disabled {\\n    background-color: #444;\\n    color: #888;\\n    cursor: not-allowed;\\n    opacity: 0.7;\\n  }\\n\"])),_ref4=>{let{theme}=_ref4;return theme.colors.primary;},_ref5=>{let{theme}=_ref5;return theme.colors.background;},_ref6=>{let{theme}=_ref6;return theme.fonts.headings;},_ref7=>{let{theme}=_ref7;return theme.colors.secondary;},_ref8=>{let{theme}=_ref8;return theme.colors.secondary;});function formatDuration(seconds){if(seconds<0)seconds=0;const h=Math.floor(seconds/3600).toString().padStart(2,'0');const m=Math.floor(seconds%3600/60).toString().padStart(2,'0');const s=Math.floor(seconds%60).toString().padStart(2,'0');return\"\".concat(h,\":\").concat(m,\":\").concat(s);}function QuestCard(_ref9){let{protocol,onComplete,isCompleted}=_ref9;const currentTime=useCurrentTime();const[taskStartedTime,setTaskStartedTime]=useState(null);const[elapsedTime,setElapsedTime]=useState(0);const{startTime,endTime}=useMemo(()=>parseTime(protocol.time),[protocol.time]);const status=useMemo(()=>{if(isCompleted)return'completed';if(currentTime<startTime)return'locked';if(currentTime>endTime)return'missed';return'available';},[currentTime,startTime,endTime,isCompleted]);useEffect(()=>{if(taskStartedTime){const interval=setInterval(()=>{setElapsedTime(Math.floor((new Date()-taskStartedTime)/1000));},1000);return()=>clearInterval(interval);}},[taskStartedTime]);const handleStart=()=>{setTaskStartedTime(new Date());// Denemeler için başladığında tamamlanmış sayılır (seri için)\nif(protocol.title.includes('SİMÜLASYON')){onComplete(protocol);}};const timeRemaining=Math.floor((endTime-currentTime)/1000);return/*#__PURE__*/_jsxs(Card,{status:status,isCompleted:isCompleted,children:[/*#__PURE__*/_jsxs(TimerContainer,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Biti\\u015Fe Kalan: \",formatDuration(timeRemaining)]}),taskStartedTime&&/*#__PURE__*/_jsxs(\"span\",{children:[\"Ge\\xE7en S\\xFCre: \",formatDuration(elapsedTime)]})]}),status==='locked'&&/*#__PURE__*/_jsxs(ActionButton,{disabled:true,children:[\"K\\u0130L\\u0130TL\\u0130 (Ba\\u015Flang\\u0131\\xE7: \",protocol.time.split('-')[0],\")\"]}),status==='available'&&!taskStartedTime&&/*#__PURE__*/_jsx(ActionButton,{onClick:handleStart,children:\"PROTOKOL\\xDC BA\\u015ELAT\"}),status==='available'&&taskStartedTime&&!isCompleted&&/*#__PURE__*/_jsx(ActionButton,{onClick:()=>onComplete(protocol),children:\"PROTOKOL\\xDC TAMAMLA\"}),status==='completed'&&/*#__PURE__*/_jsx(ActionButton,{disabled:true,children:\"VER\\u0130 ELDE ED\\u0130LD\\u0130\"}),status==='missed'&&/*#__PURE__*/_jsx(ActionButton,{disabled:true,children:\"G\\xD6REV KA\\xC7IRILDI\"})]});}export default QuestCard;","map":{"version":3,"names":["React","useState","useEffect","useMemo","styled","css","useCurrentTime","jsxs","_jsxs","jsx","_jsx","parseTime","timeStr","start","end","split","startH","startM","map","Number","endH","endM","startTime","Date","setHours","endTime","TimerContainer","div","_templateObject","_taggedTemplateLiteral","_ref","theme","colors","textSecondary","Card","_templateObject2","_ref2","status","_templateObject3","_templateObject4","_ref3","accent","ActionButton","button","_templateObject5","_ref4","primary","_ref5","background","_ref6","fonts","headings","_ref7","secondary","_ref8","formatDuration","seconds","h","Math","floor","toString","padStart","m","s","concat","QuestCard","_ref9","protocol","onComplete","isCompleted","currentTime","taskStartedTime","setTaskStartedTime","elapsedTime","setElapsedTime","time","interval","setInterval","clearInterval","handleStart","title","includes","timeRemaining","children","disabled","onClick"],"sources":["C:/Users/Juuzou/Desktop/YKS/genesis/src/components/dashboard/QuestCard.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { useCurrentTime } from '../../hooks/useCurrentTime';\r\n\r\n// Zamanı parse etmek için yardımcı fonksiyon\r\nconst parseTime = (timeStr) => {\r\n    const [start, end] = timeStr.split('-');\r\n    const [startH, startM] = start.split(':').map(Number);\r\n    const [endH, endM] = end.split(':').map(Number);\r\n\r\n    const startTime = new Date();\r\n    startTime.setHours(startH, startM, 0, 0);\r\n\r\n    const endTime = new Date();\r\n    endTime.setHours(endH, endM, 0, 0);\r\n    \r\n    return { startTime, endTime };\r\n};\r\n\r\n// ... Stil tanımlamaları (Card, Title vs.) ...\r\nconst TimerContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 0.9rem;\r\n  color: ${({ theme }) => theme.colors.textSecondary};\r\n  margin-bottom: 1rem;\r\n`;\r\n\r\n// Card stiline yeni durumlar ekleyelim\r\nconst Card = styled.div`\r\n  /* ... önceki stiller ... */\r\n  ${({ status }) => {\r\n    if (status === 'locked') return css`opacity: 0.4; filter: grayscale(80%);`;\r\n    if (status === 'missed') return css`border-left-color: ${({ theme }) => theme.colors.accent}; opacity: 0.5;`;\r\n  }}\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  background-color: ${({ theme }) => theme.colors.primary};\r\n  color: ${({ theme }) => theme.colors.background};\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-family: ${({ theme }) => theme.fonts.headings};\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n\r\n  &:hover:not(:disabled) {\r\n    background-color: ${({ theme }) => theme.colors.secondary};\r\n    box-shadow: 0 0 10px ${({ theme }) => theme.colors.secondary};\r\n  }\r\n  \r\n  &:disabled {\r\n    background-color: #444;\r\n    color: #888;\r\n    cursor: not-allowed;\r\n    opacity: 0.7;\r\n  }\r\n`;\r\n\r\nfunction formatDuration(seconds) {\r\n    if (seconds < 0) seconds = 0;\r\n    const h = Math.floor(seconds / 3600).toString().padStart(2, '0');\r\n    const m = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');\r\n    const s = Math.floor(seconds % 60).toString().padStart(2, '0');\r\n    return `${h}:${m}:${s}`;\r\n}\r\n\r\nfunction QuestCard({ protocol, onComplete, isCompleted }) {\r\n    const currentTime = useCurrentTime();\r\n    const [taskStartedTime, setTaskStartedTime] = useState(null);\r\n    const [elapsedTime, setElapsedTime] = useState(0);\r\n\r\n    const { startTime, endTime } = useMemo(() => parseTime(protocol.time), [protocol.time]);\r\n\r\n    const status = useMemo(() => {\r\n        if (isCompleted) return 'completed';\r\n        if (currentTime < startTime) return 'locked';\r\n        if (currentTime > endTime) return 'missed';\r\n        return 'available';\r\n    }, [currentTime, startTime, endTime, isCompleted]);\r\n\r\n    useEffect(() => {\r\n        if (taskStartedTime) {\r\n            const interval = setInterval(() => {\r\n                setElapsedTime(Math.floor((new Date() - taskStartedTime) / 1000));\r\n            }, 1000);\r\n            return () => clearInterval(interval);\r\n        }\r\n    }, [taskStartedTime]);\r\n\r\n    const handleStart = () => {\r\n        setTaskStartedTime(new Date());\r\n        // Denemeler için başladığında tamamlanmış sayılır (seri için)\r\n        if (protocol.title.includes('SİMÜLASYON')) {\r\n            onComplete(protocol);\r\n        }\r\n    };\r\n    \r\n    const timeRemaining = Math.floor((endTime - currentTime) / 1000);\r\n\r\n    return (\r\n        <Card status={status} isCompleted={isCompleted}>\r\n            {/* ... CardHeader, Description ... */}\r\n            <TimerContainer>\r\n                <span>Bitişe Kalan: {formatDuration(timeRemaining)}</span>\r\n                {taskStartedTime && <span>Geçen Süre: {formatDuration(elapsedTime)}</span>}\r\n            </TimerContainer>\r\n\r\n            {status === 'locked' && <ActionButton disabled>KİLİTLİ (Başlangıç: {protocol.time.split('-')[0]})</ActionButton>}\r\n            {status === 'available' && !taskStartedTime && <ActionButton onClick={handleStart}>PROTOKOLÜ BAŞLAT</ActionButton>}\r\n            {status === 'available' && taskStartedTime && !isCompleted && <ActionButton onClick={() => onComplete(protocol)}>PROTOKOLÜ TAMAMLA</ActionButton>}\r\n            {status === 'completed' && <ActionButton disabled>VERİ ELDE EDİLDİ</ActionButton>}\r\n            {status === 'missed' && <ActionButton disabled>GÖREV KAÇIRILDI</ActionButton>}\r\n        </Card>\r\n    );\r\n}\r\n\r\nexport default QuestCard;"],"mappings":"iOAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,OAAO,KAAQ,OAAO,CAC3D,MAAO,CAAAC,MAAM,EAAIC,GAAG,KAAQ,mBAAmB,CAC/C,OAASC,cAAc,KAAQ,4BAA4B,CAE3D;AAAA,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBACA,KAAM,CAAAC,SAAS,CAAIC,OAAO,EAAK,CAC3B,KAAM,CAACC,KAAK,CAAEC,GAAG,CAAC,CAAGF,OAAO,CAACG,KAAK,CAAC,GAAG,CAAC,CACvC,KAAM,CAACC,MAAM,CAAEC,MAAM,CAAC,CAAGJ,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAACG,GAAG,CAACC,MAAM,CAAC,CACrD,KAAM,CAACC,IAAI,CAAEC,IAAI,CAAC,CAAGP,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC,CAACG,GAAG,CAACC,MAAM,CAAC,CAE/C,KAAM,CAAAG,SAAS,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAC5BD,SAAS,CAACE,QAAQ,CAACR,MAAM,CAAEC,MAAM,CAAE,CAAC,CAAE,CAAC,CAAC,CAExC,KAAM,CAAAQ,OAAO,CAAG,GAAI,CAAAF,IAAI,CAAC,CAAC,CAC1BE,OAAO,CAACD,QAAQ,CAACJ,IAAI,CAAEC,IAAI,CAAE,CAAC,CAAE,CAAC,CAAC,CAElC,MAAO,CAAEC,SAAS,CAAEG,OAAQ,CAAC,CACjC,CAAC,CAED;AACA,KAAM,CAAAC,cAAc,CAAGtB,MAAM,CAACuB,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,4HAItBC,IAAA,MAAC,CAAEC,KAAM,CAAC,CAAAD,IAAA,OAAK,CAAAC,KAAK,CAACC,MAAM,CAACC,aAAa,GAEnD,CAED;AACA,KAAM,CAAAC,IAAI,CAAG9B,MAAM,CAACuB,GAAG,CAAAQ,gBAAA,GAAAA,gBAAA,CAAAN,sBAAA,oDAEnBO,KAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,KAAA,CACX,GAAIC,MAAM,GAAK,QAAQ,CAAE,MAAO,CAAAhC,GAAG,CAAAiC,gBAAA,GAAAA,gBAAA,CAAAT,sBAAA,8CACnC,GAAIQ,MAAM,GAAK,QAAQ,CAAE,MAAO,CAAAhC,GAAG,CAAAkC,gBAAA,GAAAA,gBAAA,CAAAV,sBAAA,6CAAsBW,KAAA,MAAC,CAAET,KAAM,CAAC,CAAAS,KAAA,OAAK,CAAAT,KAAK,CAACC,MAAM,CAACS,MAAM,IAC7F,CAAC,CACF,CAED,KAAM,CAAAC,YAAY,CAAGtC,MAAM,CAACuC,MAAM,CAAAC,gBAAA,GAAAA,gBAAA,CAAAf,sBAAA,yaAGZgB,KAAA,MAAC,CAAEd,KAAM,CAAC,CAAAc,KAAA,OAAK,CAAAd,KAAK,CAACC,MAAM,CAACc,OAAO,GAC9CC,KAAA,MAAC,CAAEhB,KAAM,CAAC,CAAAgB,KAAA,OAAK,CAAAhB,KAAK,CAACC,MAAM,CAACgB,UAAU,GAGhCC,KAAA,MAAC,CAAElB,KAAM,CAAC,CAAAkB,KAAA,OAAK,CAAAlB,KAAK,CAACmB,KAAK,CAACC,QAAQ,GAM5BC,KAAA,MAAC,CAAErB,KAAM,CAAC,CAAAqB,KAAA,OAAK,CAAArB,KAAK,CAACC,MAAM,CAACqB,SAAS,GAClCC,KAAA,MAAC,CAAEvB,KAAM,CAAC,CAAAuB,KAAA,OAAK,CAAAvB,KAAK,CAACC,MAAM,CAACqB,SAAS,GAS/D,CAED,QAAS,CAAAE,cAAcA,CAACC,OAAO,CAAE,CAC7B,GAAIA,OAAO,CAAG,CAAC,CAAEA,OAAO,CAAG,CAAC,CAC5B,KAAM,CAAAC,CAAC,CAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAAG,IAAI,CAAC,CAACI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAChE,KAAM,CAAAC,CAAC,CAAGJ,IAAI,CAACC,KAAK,CAAEH,OAAO,CAAG,IAAI,CAAI,EAAE,CAAC,CAACI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CACvE,KAAM,CAAAE,CAAC,CAAGL,IAAI,CAACC,KAAK,CAACH,OAAO,CAAG,EAAE,CAAC,CAACI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAC9D,SAAAG,MAAA,CAAUP,CAAC,MAAAO,MAAA,CAAIF,CAAC,MAAAE,MAAA,CAAID,CAAC,EACzB,CAEA,QAAS,CAAAE,SAASA,CAAAC,KAAA,CAAwC,IAAvC,CAAEC,QAAQ,CAAEC,UAAU,CAAEC,WAAY,CAAC,CAAAH,KAAA,CACpD,KAAM,CAAAI,WAAW,CAAGhE,cAAc,CAAC,CAAC,CACpC,KAAM,CAACiE,eAAe,CAAEC,kBAAkB,CAAC,CAAGvE,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACwE,WAAW,CAAEC,cAAc,CAAC,CAAGzE,QAAQ,CAAC,CAAC,CAAC,CAEjD,KAAM,CAAEqB,SAAS,CAAEG,OAAQ,CAAC,CAAGtB,OAAO,CAAC,IAAMQ,SAAS,CAACwD,QAAQ,CAACQ,IAAI,CAAC,CAAE,CAACR,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAEvF,KAAM,CAAAtC,MAAM,CAAGlC,OAAO,CAAC,IAAM,CACzB,GAAIkE,WAAW,CAAE,MAAO,WAAW,CACnC,GAAIC,WAAW,CAAGhD,SAAS,CAAE,MAAO,QAAQ,CAC5C,GAAIgD,WAAW,CAAG7C,OAAO,CAAE,MAAO,QAAQ,CAC1C,MAAO,WAAW,CACtB,CAAC,CAAE,CAAC6C,WAAW,CAAEhD,SAAS,CAAEG,OAAO,CAAE4C,WAAW,CAAC,CAAC,CAElDnE,SAAS,CAAC,IAAM,CACZ,GAAIqE,eAAe,CAAE,CACjB,KAAM,CAAAK,QAAQ,CAAGC,WAAW,CAAC,IAAM,CAC/BH,cAAc,CAAChB,IAAI,CAACC,KAAK,CAAC,CAAC,GAAI,CAAApC,IAAI,CAAC,CAAC,CAAGgD,eAAe,EAAI,IAAI,CAAC,CAAC,CACrE,CAAC,CAAE,IAAI,CAAC,CACR,MAAO,IAAMO,aAAa,CAACF,QAAQ,CAAC,CACxC,CACJ,CAAC,CAAE,CAACL,eAAe,CAAC,CAAC,CAErB,KAAM,CAAAQ,WAAW,CAAGA,CAAA,GAAM,CACtBP,kBAAkB,CAAC,GAAI,CAAAjD,IAAI,CAAC,CAAC,CAAC,CAC9B;AACA,GAAI4C,QAAQ,CAACa,KAAK,CAACC,QAAQ,CAAC,YAAY,CAAC,CAAE,CACvCb,UAAU,CAACD,QAAQ,CAAC,CACxB,CACJ,CAAC,CAED,KAAM,CAAAe,aAAa,CAAGxB,IAAI,CAACC,KAAK,CAAC,CAAClC,OAAO,CAAG6C,WAAW,EAAI,IAAI,CAAC,CAEhE,mBACI9D,KAAA,CAAC0B,IAAI,EAACG,MAAM,CAAEA,MAAO,CAACgC,WAAW,CAAEA,WAAY,CAAAc,QAAA,eAE3C3E,KAAA,CAACkB,cAAc,EAAAyD,QAAA,eACX3E,KAAA,SAAA2E,QAAA,EAAM,qBAAc,CAAC5B,cAAc,CAAC2B,aAAa,CAAC,EAAO,CAAC,CACzDX,eAAe,eAAI/D,KAAA,SAAA2E,QAAA,EAAM,oBAAY,CAAC5B,cAAc,CAACkB,WAAW,CAAC,EAAO,CAAC,EAC9D,CAAC,CAEhBpC,MAAM,GAAK,QAAQ,eAAI7B,KAAA,CAACkC,YAAY,EAAC0C,QAAQ,MAAAD,QAAA,EAAC,kDAAoB,CAAChB,QAAQ,CAACQ,IAAI,CAAC5D,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAC,EAAc,CAAC,CAC/GsB,MAAM,GAAK,WAAW,EAAI,CAACkC,eAAe,eAAI7D,IAAA,CAACgC,YAAY,EAAC2C,OAAO,CAAEN,WAAY,CAAAI,QAAA,CAAC,0BAAgB,CAAc,CAAC,CACjH9C,MAAM,GAAK,WAAW,EAAIkC,eAAe,EAAI,CAACF,WAAW,eAAI3D,IAAA,CAACgC,YAAY,EAAC2C,OAAO,CAAEA,CAAA,GAAMjB,UAAU,CAACD,QAAQ,CAAE,CAAAgB,QAAA,CAAC,sBAAiB,CAAc,CAAC,CAChJ9C,MAAM,GAAK,WAAW,eAAI3B,IAAA,CAACgC,YAAY,EAAC0C,QAAQ,MAAAD,QAAA,CAAC,iCAAgB,CAAc,CAAC,CAChF9C,MAAM,GAAK,QAAQ,eAAI3B,IAAA,CAACgC,YAAY,EAAC0C,QAAQ,MAAAD,QAAA,CAAC,uBAAe,CAAc,CAAC,EAC3E,CAAC,CAEf,CAEA,cAAe,CAAAlB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}