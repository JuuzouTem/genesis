{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Juuzou\\\\Desktop\\\\YKS\\\\genesis\\\\src\\\\contexts\\\\UserProgressContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { allAchievements } from '../data/achievements';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LOCAL_STORAGE_KEY = 'projeGenesisUserProgress';\nconst UserProgressContext = /*#__PURE__*/createContext();\nexport const useUserProgress = () => {\n  _s();\n  return useContext(UserProgressContext);\n};\n_s(useUserProgress, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst LEVEL_THRESHOLDS = [0, 500, 1500, 4000, 8000, 15000, 25000, 40000, 60000, 85000, 120000];\nexport const UserProgressProvider = ({\n  children\n}) => {\n  _s2();\n  const [progress, setProgress] = useState(() => {\n    try {\n      const savedProgress = localStorage.getItem(LOCAL_STORAGE_KEY);\n      if (savedProgress) {\n        const parsed = JSON.parse(savedProgress);\n        // DÜZELTME: Tüm Set'lerin doğru şekilde yeniden oluşturulması\n        return {\n          ap: parsed.ap || 0,\n          vk: parsed.vk || 0,\n          level: parsed.level || 1,\n          completedProtocols: new Set(parsed.completedProtocols || []),\n          purchasedItems: new Set(parsed.purchasedItems || []),\n          unlockedAchievements: new Set(parsed.unlockedAchievements || [])\n        };\n      }\n    } catch (error) {\n      console.error(\"Failed to parse progress from localStorage\", error);\n    }\n    // DÜZELTME: Başlangıç state'inde tüm alanların olması\n    return {\n      ap: 0,\n      vk: 0,\n      level: 1,\n      completedProtocols: new Set(),\n      purchasedItems: new Set(),\n      unlockedAchievements: new Set()\n    };\n  });\n  const [notification, setNotification] = useState(null);\n  const showNotification = message => {\n    setNotification(message);\n    setTimeout(() => setNotification(null), 4000);\n  };\n\n  // DÜZELTME: Tek ve birleştirilmiş useEffect\n  useEffect(() => {\n    // 1. Başarımları kontrol et\n    allAchievements.forEach(ach => {\n      if (!progress.unlockedAchievements.has(ach.id) && ach.condition(progress)) {\n        setProgress(prev => ({\n          ...prev,\n          unlockedAchievements: new Set(prev.unlockedAchievements).add(ach.id)\n        }));\n        showNotification(`Kilometre Taşı Ulaşıldı: ${ach.name}`);\n      }\n    });\n\n    // 2. Seviye atlamayı kontrol et\n    const nextLevelThreshold = LEVEL_THRESHOLDS[progress.level];\n    if (nextLevelThreshold && progress.ap >= nextLevelThreshold) {\n      const newLevel = progress.level + 1;\n      setProgress(prev => ({\n        ...prev,\n        level: newLevel\n      }));\n      showNotification(`YETKİNLİK SEVİYESİ ARTTI! YS ${newLevel}'e ulaştın!`);\n    }\n\n    // 3. localStorage'a kaydet\n    const dataToSave = {\n      ...progress,\n      completedProtocols: Array.from(progress.completedProtocols),\n      purchasedItems: Array.from(progress.purchasedItems),\n      unlockedAchievements: Array.from(progress.unlockedAchievements)\n    };\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(dataToSave));\n  }, [progress]);\n\n  // DÜZELTME: Sadece state'i güncelleyen tekil fonksiyonlar\n  const completeProtocol = protocol => {\n    if (!progress.completedProtocols.has(protocol.id)) {\n      setProgress(prev => ({\n        ...prev,\n        ap: prev.ap + protocol.ap,\n        vk: prev.vk + protocol.vk,\n        completedProtocols: new Set(prev.completedProtocols).add(protocol.id)\n      }));\n    }\n  };\n  const purchaseLabItem = item => {\n    if (progress.vk >= item.cost && !progress.purchasedItems.has(item.id)) {\n      setProgress(prev => ({\n        ...prev,\n        vk: prev.vk - item.cost,\n        purchasedItems: new Set(prev.purchasedItems).add(item.id)\n      }));\n      showNotification(`${item.name} satın alındı!`);\n    }\n  };\n  const value = {\n    ...progress,\n    LEVEL_THRESHOLDS,\n    notification,\n    completeProtocol,\n    purchaseLabItem\n  };\n  return /*#__PURE__*/_jsxDEV(UserProgressContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n_s2(UserProgressProvider, \"1z3ybxDxxlh/He8gVlt3nKGbONg=\");\n_c = UserProgressProvider;\nvar _c;\n$RefreshReg$(_c, \"UserProgressProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","allAchievements","jsxDEV","_jsxDEV","LOCAL_STORAGE_KEY","UserProgressContext","useUserProgress","_s","LEVEL_THRESHOLDS","UserProgressProvider","children","_s2","progress","setProgress","savedProgress","localStorage","getItem","parsed","JSON","parse","ap","vk","level","completedProtocols","Set","purchasedItems","unlockedAchievements","error","console","notification","setNotification","showNotification","message","setTimeout","forEach","ach","has","id","condition","prev","add","name","nextLevelThreshold","newLevel","dataToSave","Array","from","setItem","stringify","completeProtocol","protocol","purchaseLabItem","item","cost","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Juuzou/Desktop/YKS/genesis/src/contexts/UserProgressContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\r\nimport { allAchievements } from '../data/achievements';\r\n\r\nconst LOCAL_STORAGE_KEY = 'projeGenesisUserProgress';\r\nconst UserProgressContext = createContext();\r\n\r\nexport const useUserProgress = () => useContext(UserProgressContext);\r\n\r\nconst LEVEL_THRESHOLDS = [0, 500, 1500, 4000, 8000, 15000, 25000, 40000, 60000, 85000, 120000];\r\n\r\nexport const UserProgressProvider = ({ children }) => {\r\n  const [progress, setProgress] = useState(() => {\r\n    try {\r\n      const savedProgress = localStorage.getItem(LOCAL_STORAGE_KEY);\r\n      if (savedProgress) {\r\n        const parsed = JSON.parse(savedProgress);\r\n        // DÜZELTME: Tüm Set'lerin doğru şekilde yeniden oluşturulması\r\n        return {\r\n          ap: parsed.ap || 0,\r\n          vk: parsed.vk || 0,\r\n          level: parsed.level || 1,\r\n          completedProtocols: new Set(parsed.completedProtocols || []),\r\n          purchasedItems: new Set(parsed.purchasedItems || []),\r\n          unlockedAchievements: new Set(parsed.unlockedAchievements || []),\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to parse progress from localStorage\", error);\r\n    }\r\n    // DÜZELTME: Başlangıç state'inde tüm alanların olması\r\n    return {\r\n      ap: 0, vk: 0, level: 1,\r\n      completedProtocols: new Set(),\r\n      purchasedItems: new Set(),\r\n      unlockedAchievements: new Set(),\r\n    };\r\n  });\r\n\r\n  const [notification, setNotification] = useState(null);\r\n\r\n  const showNotification = (message) => {\r\n    setNotification(message);\r\n    setTimeout(() => setNotification(null), 4000);\r\n  };\r\n  \r\n  // DÜZELTME: Tek ve birleştirilmiş useEffect\r\n  useEffect(() => {\r\n    // 1. Başarımları kontrol et\r\n    allAchievements.forEach(ach => {\r\n      if (!progress.unlockedAchievements.has(ach.id) && ach.condition(progress)) {\r\n        setProgress(prev => ({\r\n            ...prev,\r\n            unlockedAchievements: new Set(prev.unlockedAchievements).add(ach.id),\r\n        }));\r\n        showNotification(`Kilometre Taşı Ulaşıldı: ${ach.name}`);\r\n      }\r\n    });\r\n\r\n    // 2. Seviye atlamayı kontrol et\r\n    const nextLevelThreshold = LEVEL_THRESHOLDS[progress.level];\r\n    if (nextLevelThreshold && progress.ap >= nextLevelThreshold) {\r\n        const newLevel = progress.level + 1;\r\n        setProgress(prev => ({ ...prev, level: newLevel }));\r\n        showNotification(`YETKİNLİK SEVİYESİ ARTTI! YS ${newLevel}'e ulaştın!`);\r\n    }\r\n\r\n    // 3. localStorage'a kaydet\r\n    const dataToSave = {\r\n      ...progress,\r\n      completedProtocols: Array.from(progress.completedProtocols),\r\n      purchasedItems: Array.from(progress.purchasedItems),\r\n      unlockedAchievements: Array.from(progress.unlockedAchievements),\r\n    };\r\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(dataToSave));\r\n  }, [progress]);\r\n\r\n  // DÜZELTME: Sadece state'i güncelleyen tekil fonksiyonlar\r\n  const completeProtocol = (protocol) => {\r\n    if (!progress.completedProtocols.has(protocol.id)) {\r\n      setProgress(prev => ({\r\n        ...prev,\r\n        ap: prev.ap + protocol.ap,\r\n        vk: prev.vk + protocol.vk,\r\n        completedProtocols: new Set(prev.completedProtocols).add(protocol.id),\r\n      }));\r\n    }\r\n  };\r\n  \r\n  const purchaseLabItem = (item) => {\r\n    if (progress.vk >= item.cost && !progress.purchasedItems.has(item.id)) {\r\n      setProgress(prev => ({\r\n        ...prev,\r\n        vk: prev.vk - item.cost,\r\n        purchasedItems: new Set(prev.purchasedItems).add(item.id),\r\n      }));\r\n       showNotification(`${item.name} satın alındı!`);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    ...progress,\r\n    LEVEL_THRESHOLDS,\r\n    notification,\r\n    completeProtocol,\r\n    purchaseLabItem,\r\n  };\r\n\r\n  return (\r\n    <UserProgressContext.Provider value={value}>\r\n      {children}\r\n    </UserProgressContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}